<head>
  <title>Butler at your service</title>
</head>

<body>
   {{>navbar}}
   <div class="row">
      <br><br>
   </div>
   <div class="row">
      {{>routerTemplate}}
   </div>
</body>

<template name="routerTemplate">
   {{#if homePage}}
      {{>homeTemplate}}
   {{/if}}

   {{#if orderPage}}
      {{>ordersTemplate}}
   {{/if}}

   {{#if requestsPage}}
      {{>requestsTemplate}}
   {{/if}}   
</template>


<template name="navbar">
   <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">Butler</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/requests">Requests</a></li>
            </ul>
            <ul class="nav pull-right">
               <br>
               <li>{{loginButtons}}</li>
               <li><a href=""></a></li>
               <li><a href=""></a></li>
               <li><a href=""></a></li>
               <li><a href=""></a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
</template>



<template name="homeTemplate">
   <div class="container">
      <br>
      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
        <h1>Butler at your service!</h1>
        <p>Butler is an easy way to collect food orders from multiple people and forward to the cateror. <br>
         Follow 3 easy steps below.</p>
        <p><a href="/requests" class="btn btn-primary btn-large">Try out &raquo;</a></p>
      </div>

      <!-- Example row of columns -->
      <div class="row">
        <div class="span4">
          <h2>Create requests</h2>
          <p>Enter the restaurant name, type of food and field names for the orders. </p>
        </div>
        <div class="span4">
          <h2>Send the link</h2>
          <p>Forward the link for the orders page to your friends. </p>
       </div>
        <div class="span4">
          <h2>Collect the orders</h2>
          <p>Get real time status as your friends put down their orders.</p>
        </div>
      </div>
      <hr>
    </div>
</template>





<template name="requestsTemplate">
   {{#if currentUser}}
      <div class="span4 offset1">
         {{> newRequest}}
      </div>
      <div class="span8">
         {{> requestsList}}
      </div>
   {{else}}
      <div class="span4 offset1">
         {{> requestRequestLogin}}
      </div>
   {{/if}}
</template>

<template name="requestRequestLogin">
   <h1>Your Requests</h1>

   Sign in to create or view requests.
</template>

<template name="newRequest">
   <h2>New Request</h2>

   <label>Title</label>
   <input type="text" id="title">

   <label>Due</label>
   <input type="text" id="due">

   <label>Fields</label>
   <textarea id="fields" rows="3"/>

   <br><br>
   <button class="btn btn-success" id="create">Create</button>
   <button class="btn" id="clear">Clear</button>
</template>

<template name="requestsList">
   <h1>Your Requests</h1>
   <table class="table table-bordered table-hover">
      <thead>
         <tr>
            <th>Title</th>
            <th>Entries</th>
            <th>Due</th>
            <th>Link</th>
            <th>Delete</th>
         </tr>
      </thead>
      <tbody>
         {{#each requests}}
            {{> request}}
         {{/each}}
      </tbody>
   </table>
</template>

<template name="request">
   <tr>
      <td>{{title}}</td>
      <td>{{entries}}</td>
      <td>{{due}}</td>
      <td><a href="/requests/{{_id}}">Link</a></td>
      <td><button class="btn btn-small btn-danger" id="delete">Delete</button></td>
   </tr>
</template>









<template name="ordersTemplate">
   <div class="span4 offset1">
      {{#if currentUser}}
         {{> newOrder}}
      {{else}}
         {{> requestLogin}}
      {{/if}}
   </div>

   <div class="span8">
      {{> ordersList}}
   </div>
</template>

<template name="requestLogin">
   <h1>Your Order</h1>

   Sign in to place your order.
</template>

<template name="newOrder">
   <h1>Your Order</h1>

   {{#if existingOrder}}

      {{#each existingOrderFieldValues}}
            <label>{{field}}</label>
            <input type="text" class="values" id="{{field}}" value="{{value}}">
      {{/each}}

      <br><br>
      <button class="btn btn-success" id="update">Update</button>
      <button class="btn btn-danger" id="delete">Delete</button>

   {{else}}

      {{#each currentRequest.fields}}
            <label>{{this}}</label>
            <input type="text" class="values" id="{{this}}">
      {{/each}}

      <br><br>
      <button class="btn btn-success" id="create">Submit</button>

   {{/if}}

   <button class="btn" id="clear">Clear</button>

</template>

<template name="ordersList">

   <h2> {{request.title}} </h2>
   <h5> Due: {{ request.due }} </h5>

   <table class="table table-striped table-bordered">
      <thead>
         <tr>
            <th>User</th>
            {{#each request.fields}}
               <th>{{this}}</th>
            {{/each}}
         </tr>
      </thead>
      <tbody>
         {{#each orders}}
            {{> order}}
         {{/each}}
      </tbody>
   </table>

   <h5> Total Entries: {{request.entries}} </h5>

</template>

<template name="order">
   <tr>
      <td>{{userName}}</td>
      {{#each values}}
         <td>{{this}}</td>
      {{/each}}
   </tr>
</template>

