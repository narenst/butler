<head>
  <title>Butler at your service</title>
</head>

<body>
   {{loginButtons}}

   <div class="row">
      {{>routerTemplate}}
   </div>
</body>

<template name="routerTemplate">
   {{#if orderPage}}
      {{>ordersTemplate}}
   {{/if}}

   {{#if requestsPage}}
      {{>requestsTemplate}}
   {{/if}}   
</template>

<template name="requestsTemplate">
   {{#if currentUser}}
      <div class="span4 offset1">
         {{> newRequest}}
      </div>
      <div class="span8">
         {{> requestsList}}
      </div>
   {{else}}
      <div class="span4 offset1">
         {{> requestRequestLogin}}
      </div>
   {{/if}}
</template>

<template name="requestRequestLogin">
   <h1>Your Requests</h1>

   Login above to view your requests.
</template>

<template name="newRequest">
   <h2>New Request</h2>

   <label>Title</label>
   <input type="text" id="title">

   <label>Due</label>
   <input type="text" id="due">

   <label>Fields</label>
   <textarea id="fields" rows="3"/>

   <br><br>
   <button class="btn btn-success" id="create">Create</button>
   <button class="btn" id="clear">Clear</button>
</template>

<template name="requestsList">
   <h1>Your Requests</h1>
   <table class="table table-bordered table-hover">
      <thead>
         <tr>
            <th>Title</th>
            <th>Entries</th>
            <th>Due</th>
            <th>Link</th>
            <th>Delete</th>
         </tr>
      </thead>
      <tbody>
         {{#each requests}}
            {{> request}}
         {{/each}}
      </tbody>
   </table>
</template>

<template name="request">
   <tr>
      <td>{{title}}</td>
      <td>{{entries}}</td>
      <td>{{due}}</td>
      <td><a href="requests/{{_id}}">Link</a></td>
      <td><button class="btn btn-danger" id="delete">Delete</button></td>
   </tr>
</template>







<template name="ordersTemplate">
   <div class="span4 offset1">
      {{#if currentUser}}
         {{> newOrder}}
      {{else}}
         {{> requestLogin}}
      {{/if}}
   </div>

   <div class="span8">
      {{> ordersList}}
   </div>
</template>

<template name="requestLogin">
   <h1>Your Order</h1>

   Login above to place your order.
</template>

<template name="newOrder">
   <h1>Your Order</h1>

   {{#if existingOrder}}

      {{#each existingOrderFieldValues}}
            <label>{{field}}</label>
            <input type="text" class="values" id="{{field}}" value="{{value}}">
      {{/each}}

      <br><br>
      <button class="btn btn-success" id="update">Update</button>
      <button class="btn btn-danger" id="delete">Delete</button>

   {{else}}

      {{#each currentRequest.fields}}
            <label>{{this}}</label>
            <input type="text" class="values" id="{{this}}">
      {{/each}}

      <br><br>
      <button class="btn btn-success" id="create">Submit</button>

   {{/if}}

   <button class="btn" id="clear">Clear</button>

</template>

<template name="ordersList">

   <h2> {{request.title}} </h2>
   <h5> Due: {{ request.due }} </h5>

   <table class="table table-striped table-bordered">
      <thead>
         <tr>
            <th>User</th>
            {{#each request.fields}}
               <th>{{this}}</th>
            {{/each}}
         </tr>
      </thead>
      <tbody>
         {{#each orders}}
            {{> order}}
         {{/each}}
      </tbody>
   </table>

   <h5> Total Entries: {{request.entries}} </h5>

</template>

<template name="order">
   <tr>
      <td>{{userName}}</td>
      {{#each values}}
         <td>{{this}}</td>
      {{/each}}
   </tr>
</template>

